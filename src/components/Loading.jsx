import { useEffect } from "react";
import { motion, useAnimate } from "framer-motion";
const SvgPathLoader = () => {
  const [scope, animate] = useAnimate();

  useEffect(() => {
    const animateLoader = async () => {
      animate(
        [
          [".outline1", { pathLength: 0.5, pathOffset: 0 }],
          [".outline1", { pathLength: 0.05, pathOffset: 0 }],
          [".outline2", { pathLength: 0.5, pathOffset: 0.5 }, { at: "<" }],
        ],
        { duration: 2.5, ease: "linear", repeat: Infinity }
      );
      // animate(
      //   [
      //     [".outerO", { pathLength: 1.1, pathOffset: 0 }],
      //     [".outerO", { pathLength: 0, pathOffset: 0 }]
      //   ],
      //   { duration: 2, repeat: Infinity, repeatDelay: 0.6 }
      // );
    };
    animateLoader();
  }, []);

  return (
    <svg
      ref={scope}
      className="transform rotate-45"
      width="141.73px"
      height="141.73px"
      viewBox="0 0 141.73 141.73"
    >
      <motion.path
        className="outline1"
        initial={{ pathLength: 0.5, pathOffset: 0.5 }}
        fill="none"
        stroke="#ffffff"
        d="M79.194,78.9c3.57-3.367,10.829-0.518,15.584,3.275
          c8.314,6.631,12.68,17.133,13.137,18.506c0.472,1.414,3.569,9.227,9.228,5.455s0.337-14.277-5.658-22.359
          c-5.993-8.082-16.298-14.255-16.298-14.255l2.605-3.054c0,0,6.05,2.613,10.797,3.098c4.513,0.462,14.347,0.076,13.448-6.51
          c-0.764-5.6-10.245-2.855-13.739-3.412c-1.807-0.287-6.496-3.368-6.496-3.368s-1.496-1.93,3.353-5.521
          c6.734-1.459,11.251-11.676,7.481-17.34c-4.197-6.309-11.89-1.853-15.026-3.583c-5.657-5.208-26.144-5.253-26.144-5.253
          S45.821,8.55,49.66,26.195c-4.108,1.111-9.597,4.731-14.008,9.059l0-0.101l0.099-0.101c-4.327,4.412-7.947,9.9-9.059,14.008
          c-17.645-3.839-1.616,21.806-1.616,21.806s0.044,20.487,5.253,26.144c1.73,3.137-2.726,10.829,3.583,15.026
          c5.664,3.77,15.88-0.747,17.34-7.481c3.592-4.849,5.521-3.353,5.521-3.353s3.081,4.689,3.368,6.496
          c0.556,3.494-2.187,12.975,3.413,13.738c6.585,0.898,6.971-8.935,6.51-13.447c-0.485-4.747-3.098-10.797-3.098-10.797l3.053-2.605
          c0,0,6.174,10.305,14.256,16.298c8.081,5.995,18.587,11.315,22.358,5.658c3.771-5.658-4.04-8.756-5.455-9.228
          c-1.373-0.457-11.874-4.822-18.506-13.137C78.88,89.424,75.827,82.471,79.194,78.9z"
      />
      <motion.path
        className="outline2"
        initial={{ pathLength: 0, pathOffset: 1 }}
        fill="none"
        stroke="#ffffff"
        stroke-miterlimit="10"
        d="M79.194,78.9c3.57-3.367,10.829-0.518,15.584,3.275
          c8.314,6.631,12.68,17.133,13.137,18.506c0.472,1.414,3.569,9.227,9.228,5.455s0.337-14.277-5.658-22.359
          c-5.993-8.082-16.298-14.255-16.298-14.255l2.605-3.054c0,0,6.05,2.613,10.797,3.098c4.513,0.462,14.347,0.076,13.448-6.51
          c-0.764-5.6-10.245-2.855-13.739-3.412c-1.807-0.287-6.496-3.368-6.496-3.368s-1.496-1.93,3.353-5.521
          c6.734-1.459,11.251-11.676,7.481-17.34c-4.197-6.309-11.89-1.853-15.026-3.583c-5.657-5.208-26.144-5.253-26.144-5.253
          S45.821,8.55,49.66,26.195c-4.108,1.111-9.597,4.731-14.008,9.059l0-0.101l0.099-0.101c-4.327,4.412-7.947,9.9-9.059,14.008
          c-17.645-3.839-1.616,21.806-1.616,21.806s0.044,20.487,5.253,26.144c1.73,3.137-2.726,10.829,3.583,15.026
          c5.664,3.77,15.88-0.747,17.34-7.481c3.592-4.849,5.521-3.353,5.521-3.353s3.081,4.689,3.368,6.496
          c0.556,3.494-2.187,12.975,3.413,13.738c6.585,0.898,6.971-8.935,6.51-13.447c-0.485-4.747-3.098-10.797-3.098-10.797l3.053-2.605
          c0,0,6.174,10.305,14.256,16.298c8.081,5.995,18.587,11.315,22.358,5.658c3.771-5.658-4.04-8.756-5.455-9.228
          c-1.373-0.457-11.874-4.822-18.506-13.137C78.88,89.424,75.827,82.471,79.194,78.9z"
      />
      <path
        fill="#ffffff"
        d="M46.25,56.774c0.501,0.571,0.444,1.439-0.126,1.94l0,0c-0.57,0.501-1.439,0.444-1.94-0.126L40.5,54.392
		c-0.501-0.571-0.444-1.439,0.126-1.94l0,0c0.571-0.501,1.439-0.444,1.94,0.126L46.25,56.774z"
      />
      <path
        fill="#ffffff"
        d="M59.25,44.941c0.501,0.571,0.444,1.439-0.126,1.94l0,0c-0.57,0.501-1.439,0.444-1.94-0.126L53.5,42.559
		c-0.501-0.571-0.444-1.439,0.126-1.94l0,0c0.571-0.501,1.439-0.444,1.94,0.126L59.25,44.941z"
      />
      <path
        fill="#ffffff"
        d="M50.172,57.94c-0.276,0-0.5-0.224-0.5-0.5s0.224-0.5,0.5-0.5c3.492,0,6.333-2.878,6.333-6.417c0-0.276,0.224-0.5,0.5-0.5
		s0.5,0.224,0.5,0.5C57.505,54.613,54.216,57.94,50.172,57.94z"
      />
      {/* <motion.path
          className="on1"
          initial={{ pathLength: 0.5, pathOffset: 0.5 }}
          d="M 62.368013,19.38002 V 2.2333221 h 3.63942 V 28.40881 L 45.951612,7.9542262 C 44.243841,6.1644481 42.129956,5.2695591 39.609953,5.2695591 c -2.509589,0 -4.628681,0.894889 -6.357278,2.6846671 -1.728599,1.7684692 -2.592897,3.9524228 -2.592897,6.5518618 0,2.727282 0.895537,4.969822 2.686614,6.727632 1.780665,1.75782 3.837278,2.63674 6.169842,2.63674 2.530417,0 4.665129,-0.89489 6.404139,-2.68469 1.73901,-1.81107 3.06749,-5.864752 3.06749,-5.864752 l 2.65748,2.402832 c -0.5354,2.2704 -1.4073,4.15564 -3.16331,5.90688 -2.488768,2.48228 -5.492984,3.7234 -9.012657,3.7234 -3.113557,0 -5.909513,-1.10264 -8.38786,-3.3079 -2.728269,-2.43963 -4.092402,-5.63566 -4.092402,-9.588092 0,-3.473017 1.24438,-6.4559818 3.733144,-8.9488859 2.478351,-2.492904 5.456536,-3.739355 8.934554,-3.739355 3.436367,0 6.383314,1.257105 8.840841,3.771317 z"
        />
        <motion.path
          className="on2"
          initial={{ pathLength: 0, pathOffset: 1 }}
          d="M 62.368013,19.38002 V 2.2333221 h 3.63942 V 28.40881 L 45.951612,7.9542262 C 44.243841,6.1644481 42.129956,5.2695591 39.609953,5.2695591 c -2.509589,0 -4.628681,0.894889 -6.357278,2.6846671 -1.728599,1.7684692 -2.592897,3.9524228 -2.592897,6.5518618 0,2.727282 0.895537,4.969822 2.686614,6.727632 1.780665,1.75782 3.837278,2.63674 6.169842,2.63674 2.530417,0 4.665129,-0.89489 6.404139,-2.68469 1.73901,-1.81107 3.06749,-5.864752 3.06749,-5.864752 l 2.65748,2.402832 c -0.5354,2.2704 -1.4073,4.15564 -3.16331,5.90688 -2.488768,2.48228 -5.492984,3.7234 -9.012657,3.7234 -3.113557,0 -5.909513,-1.10264 -8.38786,-3.3079 -2.728269,-2.43963 -4.092402,-5.63566 -4.092402,-9.588092 0,-3.473017 1.24438,-6.4559818 3.733144,-8.9488859 2.478351,-2.492904 5.456536,-3.739355 8.934554,-3.739355 3.436367,0 6.383314,1.257105 8.840841,3.771317 z"
        />
        <motion.path
          className="innerO"
          initial={{ pathLength: 1.1, pathOffset: 1 }}
          style={{ rotate: -90 }}
          d="m 70.884863,14.506375 q 0,4.090915 2.68661,6.727635 2.671,2.63674 6.16987,2.63674 3.79561,0 6.40412,-2.68469 2.60851,-2.71661 2.60851,-6.615766 0,-3.947096 -2.57725,-6.6157808 -2.56168,-2.6846671 -6.34167,-2.6846671 -3.76439,0 -6.35729,2.6846671 -2.5929,2.6527048 -2.5929,6.5518618 z"
        />
        <motion.path
          className="outerO"
          initial={{ pathLength: 1.1, pathOffset: 1 }}
          style={{ rotate: 90 }}
          d="m 67.214223,14.458425 q 0,-5.2095278 3.73313,-8.9488859 3.71754,-3.739355 8.93457,-3.739355 5.15454,0 8.84083,3.771317 3.7019,3.7713141 3.7019,9.0607469 0,5.321382 -3.71752,9.028772 -3.73315,3.7234 -9.01266,3.7234 -4.67035,0 -8.38787,-3.3079 -4.09238,-3.65944 -4.09238,-9.588095 z"
        /> */}
    </svg>
  );
};

const Loading = ({ isMobile }) => {
  const transitionValues = {
    duration: 0.8,
    repeat: Infinity,
    repeatType: "reverse",
    ease: "easeOut",
  };
  const text = "Loading...".split("");

  return (
    <div className="flex flex-col items-center justify-center w-full h-full ">
      <motion.span
        className="block"
        transition={{
          y: transitionValues,
        }}
        animate={{
          y: ["0rem", "1rem"],
        }}
      >
        <SvgPathLoader />
      </motion.span>
      <div className="flex flex-row items-center justify-center">
        {text.map((el, i) => (
          <motion.span
            initial={{ opacity: 0.5 }}
            animate={{ opacity: 1 }}
            transition={{
              duration: 0.6,
              delay: i / 10,
              repeat: Infinity,
            }}
            key={i}
          >
            {el}{" "}
          </motion.span>
        ))}
      </div>
    </div>
  );
};

export default Loading;
